
### 역할, 책임, 협력
#### 개별적 객체의 행동, 상태가 아닌 객체들 간의 협력에 집중하라.

##### 협력
> 요청하고 응답하며 협력하는 사람들</br>
> 협력은 다수의 요청과 응답으로 구성됨</br>
> 전체적으로 협력은 다수의 연쇄적인 요청과 응답의 흐름으로 구성됨</br>

##### 누가 파이를 훔쳤지?
파이를 훔친 하트잭을 재판하는 장면
- 객체 : 왕, 하얀토끼, 모자장수
- 동일 목적 : 재판
 > 협력

##### 재판 속의 협력
```
요청 ) 제 파이를 하트잭이 훔쳐갔어요 재판해주세요 -> 왕
요청 ) 목격자를 불러와라 -> 토끼
요청 ) 증인석에 입장하라 -> 모자장수
요청 ) 증언하라 -> 모자장수
응답 ) 입장함
응답 ) 증언함
응답 ) 재판함
```
- 등장 인물들이 요청을 받아들일 수 있는 이유는 그 요청에 대해 적절한 방식으로 응답하는데 필요한 지식과 행동을 가지고 있기때문

#### 책임
- 객체지향 개발에서 가장 중요한 것 : 
 - 책임을 능숙하게 소프트웨어 객체에 할당하는 것

##### 책임의 분류
#### 하는 것(doing)
1. 객체를 생성하거나 계산을 하는 등의 스스로하는 것
2. 다른 객체의 행동을 시작시키는 것
3. 다른 객체의 활동을 제어하고 조절하는 것

#### 아는 것(knowing)
1. 개인적인 정보에 관해 아는 것
2. 관련된 객체에 관해 아는 것
3. 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

> 책임이란?
 > > 외부에 제공해주는 정보, 서비스 -> 인터페이스를 구성함. -> 캡슐화

#### 책임과 메세지
- 메세지 전송 : 객체가 다른 객체에게 주어진 책임을 수행하도록 요청보냄
  - 송신자
  - 수신자
- 유일한 접근 방법
  - 두 객체 사이의 관계 강조
- 설계 초반 : 
  - 어떤 객체가 어떤 책임을 수행해야하고 어떤 객체로부터 메세지를 수신할 것인지를 결정!

#### 역할
##### 책임의 집합이 의미하는 것
- 역할은 재사용 가능, 유연한 객체지향 설계를 낳는 매우 중요한 구성요소
```
왕 -> 판사, 모자 장수 -> 증인
왕, 여왕 <- 판사, 모자 장수, 요리사, 앨리스 <- 증인
```

```
판사와 증인
왕, 여왕 <- 판사, 모자 장수, 요리사, 앨리스 <- 증인
```

##### 역할이 답이다
- 역할 : 
```
협력 내 다른 객체로 대체할 수 있음을 나타냄.  (추상화)
유사한 협력을 추상화 -> 인지 과부하 줄임.
다양한 객체들이 협력에 참여할 수 있음. -> 협력 유연해짐, 재사용성 높아짐.
설계의 단순성, 유연성, 재사용성을 뒷받침하는 핵심개념.
```

협력의 추상화 : 역할
대체 가능성
행위가 호환됨 = 동일한 책임을 수행한다.
역할 이외에 다른 책임을 더 가질 수 있음
ex) 왕 : 재판한다, 국정을 돌보다 / 모자장수 : 증언하다, 모자를 팔다

객체의 모양을 결정하는 협력
흔한 오류
데이터를 저장하기 위해 객체 존재? X -> 객체의 행동, 책임이 가장 중요
클래스를 어떻게 구현할것인가? X -> 객체가 협력 안에서 어떤 책임과 역할을 수행할 것인지 결정
전형적인 왕의 모습으로 객체 설개 X -> 협력의 측면에서 왕이 어떤 책임과 역할을 가지고 있는가 고려해야함.

협력을 따라 흐르는 객체의 책임
객체들이 주고받을 요청과 응답의 흐름을 결정한다 -> 책임 할당
책임을 수행하게데 필요한 데이터 고민
데이터, 행동이 결정된 후에 클래스의 구현 방법을 결정해야 함.
객체를 충분히 협력적 & 자율적으로 만드는 것.

#### 객체지향 설계 기법
1. 책임 주도 설계
2. 디자인 패턴
3. 테스트 주도 개발

##### 책임-주도 설계
1. 시스템이 사용자에게 제공해야하는 기능인 시스템 책임을 파악한다.
2. 시스템 책임을 더 작은 책임으로 분할한다.
3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
  - 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
4. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.
> 역할, 책임, 협력에 집중하라

##### 디자인 패턴
- 책임-주도 설계의 결과물을 패턴화한 것.
- Composite 패턴 예시

##### 테스트 - 주도 개발
- 책임을 수행할 객체 또는 클라이언트가 기대하는 객체의 역할이 메시지를 수신할 때 어떤 결과를 반환하고 그 과정에서 어떤 객체와 협력할 것인지에 대한 기대를 코드의 형태로 작성하는 것
- 책임-주도 설계를 테스트라는 안정장칠르 통해 좀 더 빠르고 견고하게 도달하게 해주는 최상의 설계 프렉티스

